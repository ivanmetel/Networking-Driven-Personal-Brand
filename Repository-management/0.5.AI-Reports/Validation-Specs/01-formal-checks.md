---
type: doc
status: active
created: 2026-01-14
updated: 2026-01-14
family: F0
scope: repository
---

# ТЗ: Формальные проверки (Formal Checks)

> **Цель:** Автоматическая проверка формальной корректности хранилища.

## Расписание

- **Автоматически:** Воскресенье, 9:00
- **Вручную:** `/validate formal`

---

## 1. Проверка структуры папок

### 1.1. Корректность именования ядер

**Что проверяем:**
- Папки ядер имеют формат `{Буква}.{Имя-Системы}/`
- Буквы идут последовательно: A, B, C, D...
- Имена систем конкретные (не "Target-System", "Our-System")

**Критерии ошибки:**
```
❌ A.Target-System/          # Абстрактное имя
❌ A.SOI-Name/                # Шаблонное имя
❌ C.System/                  # Пропущена буква B
✅ A.Automobile/              # Конкретное имя
✅ B.Mobile-App/              # Конкретное имя
```

**Уровень:** Error

### 1.2. Корректность именования подсистем

**Что проверяем:**
- X1 — физическая система (надсистема)
- X2 — целевая система (SoI)
- X3 — конструктор

**Критерии ошибки:**
```
❌ A1.Daily-Life/             # НЕ физическая система
❌ A1.Market/                 # НЕ физическая система
❌ A1.Industry/               # НЕ физическая система
❌ A1.Suprasystem/            # Роль, не имя системы
✅ A1.Taxi/                   # Физическая система
✅ A1.User-Smartphone/        # Физическая система
```

**Уровень:** Error

### 1.3. Наличие обязательных папок

**Что проверяем:**
- Каждое ядро содержит X1, X2, X3
- Каждая система содержит .1.Meaning, .2.Architecture, .3.Operations

**Уровень:** Warning

---

## 2. Проверка frontmatter

### 2.1. Наличие обязательных полей

**Что проверяем:**
```yaml
---
type: [doc|index|archive]
status: [draft|active|deprecated]
created: YYYY-MM-DD
updated: YYYY-MM-DD
family: [F0|FA1-FA9|FB1-FB9|...]
scope: [repository|kernel|system]
---
```

**Уровень:** Error (для type, status), Warning (для остальных)

### 2.2. Корректность значений family

**Что проверяем:**
- F0 — только в папке 0.OPS/
- FA1-FA9 — только в ядре A
- FB1-FB9 — только в ядре B
- Номер family соответствует позиции (Meaning=1,4,7; Architecture=2,5,8; Operations=3,6,9)

**Пример соответствия:**
```
A1.Taxi/A1.1.Meaning/        → FA1
A1.Taxi/A1.2.Architecture/   → FA2
A1.Taxi/A1.3.Operations/     → FA3
A2.Automobile/A2.1.Meaning/  → FA4
A2.Automobile/A2.2.Architecture/ → FA5
```

**Уровень:** Warning

### 2.3. Актуальность дат

**Что проверяем:**
- `updated` >= `created`
- `updated` не в будущем
- Документы с `status: active` обновлялись в последние 180 дней

**Уровень:** Info

---

## 3. Проверка ссылок

### 3.1. Битые внутренние ссылки

**Что проверяем:**
- Все ссылки вида `[текст](путь.md)` ведут на существующие файлы
- Относительные пути корректны

**Уровень:** Error

### 3.2. Ссылки related

**Что проверяем:**
- Все файлы в `related:` существуют
- Обратные ссылки присутствуют (если A ссылается на B, то B должен ссылаться на A)

**Уровень:** Warning

### 3.3. Ссылки "См. также"

**Что проверяем:**
- Все ссылки в секции "## См. также" работают
- Нет дублирующихся ссылок

**Уровень:** Warning

---

## 4. Проверка дублирования

### 4.1. Дублирование имён файлов

**Что проверяем:**
- В одной папке нет файлов с одинаковыми именами (разный регистр)
- Нет файлов с одинаковыми базовыми именами в разных форматах

**Уровень:** Error

### 4.2. Дублирование заголовков

**Что проверяем:**
- В пределах одного ядра нет документов с идентичными H1 заголовками

**Уровень:** Warning

### 4.3. Дублирование терминов в глоссарии

**Что проверяем:**
- В `05-glossary.md` нет дублирующихся терминов
- Термины отсортированы

**Уровень:** Info

---

## 5. Проверка форматирования

### 5.1. Единообразие markdown

**Что проверяем:**
- Заголовки начинаются с `#` (не подчёркивание)
- Списки используют `-` или `*` (единообразно в файле)
- Таблицы правильно отформатированы

**Уровень:** Info

### 5.2. Наличие README.md

**Что проверяем:**
- Каждая папка содержит README.md
- README содержит описание содержимого папки

**Уровень:** Warning

---

## Формат вывода

```markdown
# Формальная проверка

**Дата:** 2026-01-14
**Сгенерировано:** Claude Code

## Резюме

- Ошибок (Error): 3
- Предупреждений (Warning): 7
- Информация (Info): 12

## Ошибки (требуют исправления)

### 1. Битая ссылка в A2.Automobile/A2.1.Meaning/requirements.md
- **Строка 45:** `[архитектура](../architecture.md)` → файл не найден
- **Исправление:** Заменить на `[архитектура](../A2.2.Architecture/README.md)`

### 2. Некорректное именование: B1.Market/
- **Проблема:** "Market" — не физическая система
- **Исправление:** Переименовать в физическую систему, например B1.User-Device/

## Предупреждения

### 1. Отсутствует README.md в A3.Assembly-Line/A3.2.Architecture/
...

## Информация

### 1. Документ не обновлялся 200 дней: A1.Taxi/A1.1.Meaning/market-analysis.md
...

## Статистика

| Категория | Всего | С ошибками |
|-----------|-------|------------|
| Папки | 45 | 2 |
| Файлы | 78 | 3 |
| Ссылки | 156 | 1 |
| Frontmatter | 78 | 5 |
```

---

## См. также

- [02-content-checks.md](02-content-checks.md) — содержательные проверки
- [03-development-analysis.md](03-development-analysis.md) — анализ развития
- [../../0.6.Repository-Processes/05-frontmatter-spec.md](../../0.6.Repository-Processes/05-frontmatter-spec.md) — спецификация frontmatter
